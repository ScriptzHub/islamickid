<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Quran Ramadan Hub</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&display=swap');

body {
  margin:0;
  font-family: 'Comic Neue', cursive;
  background: linear-gradient(135deg,#0cc7c3,#056468);
  color:white;
  text-align:center;
  overflow:hidden;
  height:100vh;
  display:flex;
  flex-direction:column;
  justify-content:flex-start;
  align-items:center;
  padding:20px;
}

h1 { font-size:36px; margin-bottom:10px; text-shadow: 2px 2px 4px #000; }

.panel {
  border: 2px solid #056468;
  background: rgba(0,0,0,0.25);
  padding:20px;
  margin:10px 0;
  width:90%;
  max-width:700px;
  border-radius:12px;
}

button {
  padding:12px 18px;
  font-size:16px;
  background:#00c7c3;
  border:none;
  color:white;
  cursor:pointer;
  border-radius:8px;
  margin:5px;
  font-weight:bold;
}

button:hover {background:#056468;}

.big { font-size:22px; font-weight:bold; margin-bottom:10px; }

#verse { max-height:180px; overflow-y:auto; border:1px solid #00c7c3; padding:8px; border-radius:8px; margin-top:10px; text-align:left; }

#leaderboard { max-height:120px; overflow-y:auto; border:1px solid #00c7c3; margin-top:10px; padding:8px; border-radius:8px; text-align:left; }

table { width:100%; margin-top:10px; border-collapse:collapse; }
td { padding:6px; border-bottom:1px solid #056468; }

.flash {animation: flash 0.3s ease;}
@keyframes flash {0%{background-color:#00c7c3;}100%{background-color:transparent;}}
</style>
</head>
<body>

<h1>Quran Ramadan Hub</h1>

<div class="panel">
  <div class="big">Ramadan Countdown</div>
  <div id="countdown">Loading...</div>
</div>

<div class="panel">
  <div class="big">Are you fasting for Ramadan?!</div>
  <div id="votes">Votes: 0</div>
  <button onclick="vote()">YES I'M FASTING!!!</button>
</div>

<div class="panel">
  <div class="big">Live Prayer Times</div>
  <table id="prayerTable" onclick="window.open('https://www.islamicfinder.org/prayer-times/', '_blank')"></table>
</div>

<div class="panel">
  <div class="big">Quran Verse Generator</div>
  <button onclick="getVerse()">Give Me a Verse!!!</button>
  <button onclick="copyVerse()">Copy Verse</button>
  <div id="verse"></div>
  <div class="big">Recent Verses</div>
  <div id="leaderboard"></div>
</div>

<script>
// ----- CONFIG -----
const RAMADAN_DATE = new Date("2026-02-18T00:00:00Z");
let leaderboard = JSON.parse(localStorage.getItem("recentVerses")||"[]");

// ----- RAMADAN COUNTDOWN -----
function updateCountdown(){
  const now = new Date();
  const diff = RAMADAN_DATE - now;
  const cdEl = document.getElementById("countdown");
  if(diff<=0){ cdEl.innerHTML="RAMADAN HAS BEGUN!!!"; return; }
  const d = Math.floor(diff/86400000),
        h = Math.floor((diff/3600000)%24),
        m = Math.floor((diff/60000)%60),
        s = Math.floor((diff/1000)%60);
  cdEl.innerHTML=`${d}d ${h}h ${m}m ${s}s`;
}
setInterval(updateCountdown,1000);
updateCountdown();

// ----- VOTE SYSTEM -----
function vote(){
  const last=localStorage.getItem("voteTime"), now=Date.now();
  if(last && now-last<86400000){ alert("You can vote again in 24 hours!"); return; }
  let count=parseInt(localStorage.getItem("votes")||"0");
  count++;
  localStorage.setItem("votes",count);
  localStorage.setItem("voteTime",now);
  document.getElementById("votes").innerText="Votes: "+count;
}
document.getElementById("votes").innerText="Votes: "+(localStorage.getItem("votes")||0);

// ----- PRAYER TIMES -----
async function loadPrayerTimes(){
  try{
    const res=await fetch("https://api.aladhan.com/v1/timingsByCity?city=London&country=UK&method=2");
    const data=await res.json();
    const t=data.data.timings;
    const table=document.getElementById("prayerTable");
    table.innerHTML=`
      <tr><td>Fajr</td><td>${t.Fajr}</td></tr>
      <tr><td>Dhuhr</td><td>${t.Dhuhr}</td></tr>
      <tr><td>Asr</td><td>${t.Asr}</td></tr>
      <tr><td>Maghrib</td><td>${t.Maghrib}</td></tr>
      <tr><td>Isha</td><td>${t.Isha}</td></tr>
    `;
  }catch{ document.getElementById("prayerTable").innerHTML="<tr><td>Prayer times unavailable</td></tr>"; }
}
loadPrayerTimes();

// ----- VERSE GENERATOR -----
function formatText(s){return s.charAt(0).toUpperCase()+s.slice(1).toLowerCase();}
async function getVerse(){
  const surah=Math.floor(Math.random()*114)+1;
  const res=await fetch(`https://api.alquran.cloud/v1/surah/${surah}/editions/quran-uthmani,en.asad,en.transliteration`);
  const data=await res.json();
  const a=data.data[0].ayahs, e=data.data[1].ayahs, t=data.data[2].ayahs;
  const i=Math.floor(Math.random()*a.length);
  const verseText=`${a[i].text}<br>${formatText(e[i].text)}<br>${t[i].text}<br>${data.data[0].englishName} â€” Ayah ${a[i].numberInSurah}`;
  const verseDiv=document.getElementById("verse");
  verseDiv.innerHTML=verseText;
  verseDiv.scrollTop=0;
  verseDiv.classList.add("flash"); setTimeout(()=>verseDiv.classList.remove("flash"),300);

  leaderboard.unshift(formatText(e[i].text));
  if(leaderboard.length>5) leaderboard.pop();
  localStorage.setItem("recentVerses",JSON.stringify(leaderboard));
  renderLeaderboard();
}

function renderLeaderboard(){
  const lb=document.getElementById("leaderboard");
  lb.innerHTML=leaderboard.map(v=>`- ${v}`).join("<br>");
}

// ----- COPY VERSE -----
function copyVerse(){
  const v=document.getElementById("verse").innerText;
  navigator.clipboard.writeText(v);
  alert("Verse copied!");
}
</script>

</body>
</html>
